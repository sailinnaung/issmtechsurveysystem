<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
  <class name="survey.dto.RoleDTO" table="ROLE">
    <id column="ROLE_ID" name="roleID" type="integer">
      <generator class="native"/>
    </id>
    <property column="ROLE_NAME" length="50" name="name" not-null="true" type="string" unique="true"/>
    <property column="DESCRIPTION" length="200" name="description" type="string"/>
    <bag cascade="none" name="functions" table="ROLE_FUNCTION">
      <key column="ROLE_ID"/>
      <many-to-many class="survey.dto.FunctionDTO" column="FUNCTION_ID"/>
    </bag>
  </class>
  <class name="survey.dto.FunctionDTO" table="FUNCTION">
    <id column="FUNCTION_ID" name="functionID" type="integer">
      <generator class="native"/>
    </id>
    <property column="FUNCTION_CODE" length="20" name="code" not-null="true" type="string" unique="true"/>
    <property column="FUNCTION_NAME" length="50" name="name" type="string"/>
    <property column="DESCRIPTION" length="300" name="description" type="string"/>
    <property column="DISPLAY_ORDER" name="order" type="integer"/>
  </class>
  <class name="survey.dto.UserDTO" table="USER">
    <id column="USER_ID" name="userID" type="integer">
      <generator class="native"/>
    </id>
    <property column="USER_NAME" length="30" name="username" not-null="true" type="string"/>
    <property column="PASSWORD" length="30" name="password" not-null="true" type="string"/>
    <property column="FULL_NAME" length="200" name="fullName" not-null="true" type="string"/>
    <property column="EMAIL" length="100" name="email" type="string"/>
    <property column="DELETE_FLG" name="deleteFlg" type="boolean"/>
    <many-to-one class="survey.dto.RoleDTO" column="ROLE_ID" name="role" not-null="true" unique="true"/>
  </class>
  <class name="survey.dto.SurveyDTO" table="SURVEY">
    <id column="SURVEY_ID" name="surveyID" type="integer">
      <generator class="native"/>
    </id>
    <many-to-one class="survey.dto.UserDTO" column="USER_ID" name="owner" not-null="true" fetch="join"/>
    <property column="CREATE_DATE" name="createDate" not-null="true" type="calendar_date"/>
    <property column="UPDATE_DATE" name="updateDate" not-null="true" type="calendar"/>
    <property column="TITLE" length="200" name="title" not-null="true" type="string"/>
    <property column="DESCRIPTION" length="1000" name="description" type="string"/>
    <property column="STATE" name="state" not-null="true" type="integer"/>
    <property column="START_DATE" name="startDate" not-null="true" type="calendar_date"/>
    <property column="END_DATE" name="endDate" not-null="true" type="calendar_date"/>
    <bag cascade="all" name="pages" table="SURVEY_PAGE" order-by="pageNo">
      <key column="SURVEY_ID" not-null="true"/>
      <one-to-many class="survey.dto.SurveyPageDTO"/>
    </bag>
  </class>
  <class name="survey.dto.SurveyPageDTO" table="SURVEY_PAGE">
    <id column="SURVEY_PAGE_ID" name="surveyPageID" type="integer">
      <generator class="native"/>
    </id>
    <property column="PAGE_NO" name="pageNo" type="integer"/>
    <property column="TITLE" length="200" name="title" not-null="true" type="string"/>
    <property column="DESCRIPTION" length="1000" name="description" type="string"/>
    <property column="STATE" name="state" type="integer"/>
    <bag cascade="all" name="questions" table="SURVEY_PAGE_QUESTION">
      <key column="SURVEY_PAGE_ID" not-null="true"/>
      <one-to-many class="survey.dto.QuestionDTO"/>
    </bag>
  </class>
  <class name="survey.dto.QuestionDTO" table="SURVEY_QUESTION">
    <id column="SURVEY_QUESTION_ID" name="questionID" type="integer">
      <generator class="native"/>
    </id>
    <property column="QUESTION_CODE" length="20" name="code" not-null="true" type="string"/>
    <property column="QUESTION_TEXT" length="300" name="text" not-null="true" type="string"/>
    <property column="DESCRIPTION" length="1000" name="description" type="string"/>
    <property column="STATE" name="state" type="integer"/>
    <property column="MANDATORY_FLG" name="mandatoryFlg" not-null="true" type="boolean"/>
    <property column="DISPLAY_ORDER" name="order" not-null="true" type="integer"/>
    <bag cascade="all" name="options" table="SURVEY_QUESTION_OPTION">
      <key column="SURVEY_QUESTION_ID"/>
      <one-to-many class="survey.dto.OptionDTO"/>
    </bag>
    <joined-subclass name="survey.dto.OptionQuestionDTO" table="SURVEY_OPTION_QUESTION">
      <key column="SURVEY_QUESTION_ID"/>
      <property column="MULTIPLE_FLG" name="multipleFlg" not-null="true" type="boolean"/>
      <property column="ORIENTATION" name="orientation" not-null="true" type="integer"/>
      <property column="PRINT_ORDER" name="printOrder" not-null="true" type="integer"/>
    </joined-subclass>
    <joined-subclass name="survey.dto.RatingQuestionDTO" table="SURVEY_RATING_QUESTION">
      <key column="SURVEY_QUESTION_ID"/>
      <property column="ORIENTATION" name="orientation" not-null="true" type="integer"/>
      <property column="VALUE_FROM" name="valueFrom" not-null="true" type="integer"/>
      <property column="VALUE_TO" name="valueTo" not-null="true" type="integer"/>
    </joined-subclass>
    <joined-subclass name="survey.dto.TextQuestionDTO" table="SURVEY_TEXT_QUESTION">
      <key column="SURVEY_QUESTION_ID"/>
      <property column="MULTILINE_FLG" name="multilineFlg" not-null="true" type="boolean"/>
      <property column="CHARS_LIMIT" name="charsLimit" type="integer"/>
      <property column="DEFAULT_TEXT" length="100" name="defaultText" type="string"/>
      <property column="RESTRICTION" length="20" name="restrictions" type="string"/>
    </joined-subclass>
    <joined-subclass name="survey.dto.NumberQuestionDTO" table="SURVEY_NUMBER_QUESTION">
      <key column="SURVEY_QUESTION_ID"/>
      <property column="CHARS_LIMIT" name="charsLimit" type="integer"/>
      <property column="DEFAULT_TEXT" length="100" name="defaultText" type="string"/>
    </joined-subclass>
  </class>
  <class name="survey.dto.OptionDTO" table="SURVEY_QUESTION_OPTION">
    <id column="SURVEY_QUESTION_OPTION_ID" name="optionID" type="integer">
      <generator class="native"/>
    </id>
    <property column="OPTION_CODE" length="30" name="code" not-null="true" type="string"/>
    <property column="OPTION_NAME" length="400" name="name" not-null="true" type="string"/>
    <property column="OPTION_VALUE" name="value" not-null="true" type="float"/>
    <property column="DISPLAY_ORDER" name="order" not-null="true" type="integer"/>
  </class>
</hibernate-mapping>
